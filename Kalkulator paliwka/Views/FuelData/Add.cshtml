@model KalkulatorPaliwka.Models.FuelData

@{
    ViewData["Title"] = "Add Fuel Data";
    var vehicles = ViewData["Vehicles"] as IEnumerable<KalkulatorPaliwka.Models.Vehicles>;
}

<h2>Add Fuel Data</h2>

<form method="post" asp-action="Add">
    <!-- User ID -->
    <div>
        <label for="Userid">User ID</label>
        <input type="text" id="Userid" name="userid" value="@Model.userid" />
        @if (ViewData.ModelState["userid"]?.Errors.Count > 0)
        {
            <span style="color:red;">@ViewData.ModelState["userid"]?.Errors.FirstOrDefault()?.ErrorMessage</span>
        }
    </div>

    <!-- Distance -->
    <div>
        <label for="Kilometers">Kilometers</label>
        <input type="number" id="Kilometers" name="Distance" value="@Model.Distance" min="0" step="0.01" required />
        @if (ViewData.ModelState["Distance"]?.Errors.Count > 0)
        {
            <span style="color:red;">@ViewData.ModelState["Distance"]?.Errors.FirstOrDefault()?.ErrorMessage</span>
        }
    </div>

    <!-- Fuel Consumption -->
    <div>
        <label for="FuelConsumption">Fuel Consumption (L/100km)</label>
        <input type="number" id="FuelConsumption" name="FuelConsumption" value="@Model.FuelConsumption" min="0" step="0.01" required />
        @if (ViewData.ModelState["FuelConsumption"]?.Errors.Count > 0)
        {
            <span style="color:red;">@ViewData.ModelState["FuelConsumption"]?.Errors.FirstOrDefault()?.ErrorMessage</span>
        }
    </div>

    <!-- Fuel Price -->
    <div>
        <label for="FuelPrice">Fuel Price (PLN/L)</label>
        <input type="number" id="FuelPrice" name="FuelPrice" value="@Model.FuelPrice" min="0" step="0.01" required />
        @if (ViewData.ModelState["FuelPrice"]?.Errors.Count > 0)
        {
            <span style="color:red;">@ViewData.ModelState["FuelPrice"]?.Errors.FirstOrDefault()?.ErrorMessage</span>
        }
    </div>

    <!-- Vehicle Selection -->
    <div>
        <label for="Vehicle">Select Vehicle</label>
        <select id="Vehicle" name="Vehicleid" required>
            <option value="">-- Select Vehicle --</option>
            @foreach (var vehicle in vehicles)
            {
                if (vehicle.Id == Model.Vehicleid)
                {
                    <option value="@vehicle.Id" selected>
                        @vehicle.Brand @vehicle.Model (@vehicle.RegistrationNumber)
                    </option>
                }
                else
                {
                    <option value="@vehicle.Id">
                        @vehicle.Brand @vehicle.Model (@vehicle.RegistrationNumber)
                    </option>
                }
            }
        </select>
        @if (ViewData.ModelState["Vehicleid"]?.Errors.Count > 0)
        {
            <span style="color:red;">@ViewData.ModelState["Vehicleid"]?.Errors.FirstOrDefault()?.ErrorMessage</span>
        }
    </div>

    <!-- Total Cost -->
    <div>
        <label for="TotalCost">Total Cost</label>
        <input type="number" id="TotalCost" name="TotalCost" value="@Model.TotalCost" readonly />
    </div>

    <!-- Submit Button -->
    <button type="submit">Add</button>
</form>
